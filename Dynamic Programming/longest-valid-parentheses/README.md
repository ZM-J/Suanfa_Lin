###  32. Longest Valid Parentheses

## 题目网址
https://leetcode.com/problems/longest-valid-parentheses/description/
## markdown在线编辑&查看
https://www.zybuluo.com/mdeditor
## 题目适当转述
给定一个小括号序列$s$，求$s$的最长合法子串。

## 我的做法
直接用扫描一遍就好了。

举个例子：$s=((())(((()$，图如下

|高度|-1| 0| 1| 2| 3| 4| 5| 6| 7| 8| 9|
|:--:|--|--|--|--|--|--|--|--|--|--|--|
| 5  |  |  |  |  |  |  |  |  |  | *|  |
| 4  |  |  |  |  |  |  |  |  | *|  | *|
| 3  |  |  |  | *|  |  |  | *|  |  |  |
| 2  |  |  | *|  | *|  | *|  |  |  |  |
| 1  |  | *|  |  |  | *|  |  |  |  |  |
| 0  | *|  |  |  |  |  |  |  |  |  |  |

我们用一个数组$zuizao$来记录一个右括号能匹配的最前一个的最左括号。

从左到右扫描这个括号串$s$。当我们在第$i$位碰到一个左括号的时候，那么把高度$h$加一，且让$zuizao[h]=i$。当我们在第$i$位碰到一个右括号的时候，那么把高度$h$减一，那么当前可以达到的最大的答案即为$i-zuizao[h]$。这是因为，之前更新$zuizao[h]$的时候，前一个位置的$h$肯定是要比当前位置小$1$的，用更前面的同高度的左括号将其匹配可以理解成作一条穿过当前坐标的点的、平行于$y$轴的直线（配合上图理解），肯定会与$s$所代表的折线有交点（表明之间有点比当前点高度更低，不合要求）。

在计算所有可能答案的时候取个最大值就是我们最终需要的答案。

## 复杂度分析
由于算法只是将括号串$s$从左至右扫描了一遍，故时间复杂度位$O(|s|)$。

至于空间复杂度，因为数组$zuizao$在最差情况下可能达到$|s|+1$的大小容量（例如s=$(((\ldots($），所以该算法的空间复杂度为$O(|s|)$。
